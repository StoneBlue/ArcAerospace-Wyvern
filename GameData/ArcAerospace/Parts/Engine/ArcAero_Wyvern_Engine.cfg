PART
{
	name = ArcAero_Wyvern_Engine
	module = Part
	author = Jon Ross, modified by Stone Blue & TonkaCrash

	MODEL
	{
		model = ArcAerospace/Assets/Engine/ArcAero_Wyvern_Engine
	}
	rescaleFactor = 1

	node_attach = 0.0, 0.0, 0.015, 0.0, 0.0, 1.0
	attachRules = 0,1,0,1,0

	TechRequired = specializedControl
	category = Engine
	subcategory = 0
	entryCost = 7500
	cost = 7500
	title = Wyvern Engine Pod
	manufacturer = Terminator Industries
	description = When installed properly this insanely powerful engine can be used for launch abort or propulsive landing.<color=green>\n\nIncludes: 10 units of Monopropellant.</color><color=yellow>\n\nNot For Individual Resale</color>

	mass = 0.08
	dragModelType = default
	maximum_drag = 0.0001
	minimum_drag = 0.0002
	angularDrag = 2
	maxTemp = 2400
	heatConductivity = 0.15
	skinInternalConductionMult = 4.0
	emissiveConstant = 0.9
	crashTolerance = 9
	breakingForce = 600
	breakingTorque = 800
	crossfeedEnabled = True
	bulkheadProfiles = srf
	tags = propuls rocket thruster reusability reusable landing small dragon draco super radial v2 inefficient twr spacex
	stagingIcon = LIQUID_ENGINE

	MODULE
	{
		name = ModuleToggleCrossfeed
		crossfeedStatus = True
		toggleEditor = true
		toggleFlight = true
	}

	EFFECTS
	{
		running
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.8
				pitch = 1.0 1.0
				loop = true
			}

			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/LES_Thruster
				transformName = Particles
				emission = 0.0 0.0
				emission = 0.4 0.8
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
			}
		}

		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_medium
				loop = false
			}
		}

		disengage
		{

			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				loop = false
			}
		}
		
		running_LFO
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 1.0 0.5
				pitch = 0.0 0.5
				pitch = 1.0 1.0
				loop = true
			}

			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/LES_Thruster
				transformName = Particles
				emission = 0.0 0.0
				emission = 0.4 0.8
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
			}
		}

		engage_LFO
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		
		flameout_LFO
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = Particles
				oneShot = true
			}
			
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}

	MODULE
	{
		name = ModuleEnginesFX
		engineID = Mono
		powerEffectName = running
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 40
		heatProduction = 20
		fxOffset = 0, 0, 0.01
		EngineType = Monopropellant
		exhaustDamageDistanceOffset = 0.12

		PROPELLANT
		{
			name = MonoPropellant
			ratio = 0.9
			DrawGauge = True
		}

		atmosphereCurve
		{
			key = 0 140
			key = 1 270
			key = 7 0.001
		}
	}

//	DRAG_CUBE <- Short/Long rescales should have different drag cubes?
//	{
//		cube = A, 0,0,0, 0,0,0, 0,0,0, 0,0,0, 0,0,0, 0,0,0, 0,0,0, 0,0,0
//	}


	//==================================
	//  B9PS Switchers
	//==================================
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Scale
		switcherDescription = Size
		switcherDescriptionPlural = Sizes

		SUBTYPE
		{
			name = Short

			descriptionSummary = Short Wyvern Engine Pod
			descriptionDetail = stuff
			defaultSubtypePriority = 1
			allowSwitchInFlight = false
			addedMass = 0
			addedCost = 0

			TRANSFORM
			{
				name = B9_scaling
				scaleOffset = 1.0, 0.6, 1.0
				positionOffset = 0.0, -0.1871, 0.0
			}
		}

		SUBTYPE
		{
			name = Long

			descriptionSummary = Long Wyvern Engine Pod
			descriptionDetail = stuff
			defaultSubtypePriority = 0
			allowSwitchInFlight = false
			addedMass = 0.1
			addedCost = 300

			TRANSFORM
			{
				name = B9_scaling
				scaleOffset = 1.0, 1.0, 1.0
			}
		}
	}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Propellant
		switcherDescription = Propellant
		switcherDescriptionPlural = Propellant Options // this appears in part info in part selection
		baseVolume = 0 // this needs to be here, not in a subtype
		
		SUBTYPE
		{
			name = Mono
			title = Monopropellant
			primaryColor = ResourceColorMonoPropellant
			secondaryColor = ResourceColorMonoPropellant
			descriptionSummary = Monopropellant Wyvern Engine Pod
			descriptionDetail = insert stats
//			defaultSubtypePriority = 1
			allowSwitchInFlight = false
			addedMass = 0.02
			addedCost = 800
			volumeAdded = 10 // Note, you'll get 15 Mono, as the Mono tank type has 1.5 units pe volume.
			
			TEXTURE
			{
				texture = ArcAerospace/Assets/Engine/ArcAero_Wyvern_Engine_DIF
			}
			
			tankType = MonoPropellant // you don't put RESOURCE{} in a B9 module

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = Mono
				}
			}
		}
	
		SUBTYPE
		{
			name = LFO
			title = LFO
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			descriptionSummary = LFO Wyvern Engine Pod
			descriptionDetail = insert stats
//			defaultSubtypePriority = 0
			allowSwitchInFlight = false
			addedMass = 0
			addedCost = 0
			resourcesTweakable = false // not sure if you will need this for most engines
			volumeAdded = 0 // if your subtype adds or subtracts tank volume, like Restock Terrier, you'll want this.
			
			TEXTURE
			{
				texture = ArcAerospace/Assets/Engine/ArcAero_Wyvern_EngineLFO_DIF
			}
			
			tankType = LFO // you don't put RESOURCE{} in a B9 module
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = Mono
				}
				
				DATA
				{
					description = An LFO version of the Wyvern engine pod. Sized so that 4 pods are the equivalent of a Terrier. Each has the same atmosphere curve of a Terrier at 1/4 the thrust. No fuel is carried, so a fuel tank attached to the command pod is needed (Pay attention to cross feed restrictions)
					
				// ModuleEnginesFX{} stuff
					maxThrust = 15
					heatProduction = 50
					EngineType = LiquidFuel
					powerEffectName = running_LFO
					
					

					PROPELLANT
					{
						name = LiquidFuel
						ratio = 0.9
						DrawGauge = True
					}
					
					PROPELLANT
					{
						name = Oxidizer
						ratio = 1.1
					}

					atmosphereCurve
					{
						key = 0 345
						key = 1 85
						key = 3 0.001
					}
				}
			}
		}
	}
}
